{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inventory</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link rel="stylesheet" href="{% static 'inventory/inventory.css' %}" />

    <script src="{% static 'inventory/inventory.js' %}"></script>
  </head>
  <body>
    <!-- Background Design -->
    <div class="background-design">
        <img src="https://api.builder.io/api/v1/image/assets/TEMP/69e5a03207d72e05249171283d6b3fef53da98b7?width=3356" alt="" class="bg-logo-1">
        <img src="https://api.builder.io/api/v1/image/assets/TEMP/5bae535a77c2066496e68aa5ed0ea8132703a86a?width=4062" alt="" class="bg-logo-2">
    </div>

    <!-- Navigation -->
    <nav class="navbar" style="position: fixed; top: 0; left: 0; right: 0; z-index: 1000;">
        <ul class="nav-links">
            <li><a href="{% url 'landing' %}"><i class="fas fa-home"></i> HOME</a></li>
            <li><a href="{% url 'dashboard' %}"><i class="fas fa-tachometer-alt"></i> DASHBOARD</a></li>
        </ul>
        <div class="nav-actions">
            {% if user.is_authenticated %}
                <a href="{% url 'profile' %}" class="cta-button nav-profile"><i class="fas fa-user"></i> {{ user.first_name }} {{ user.last_name }}</a>
                <form method="POST" action="{% url 'logout' %}" style="margin:0;">
                    {% csrf_token %}
                    <button type="submit" class="cta-button nav-logout">Logout</button>
                </form>
            {% else %}
                <button id="openSignup" class="cta-button nav-signup">Sign Up</button>
                <button id="openLogin" class="cta-button">Log In</button>
            {% endif %}
        </div>
    </nav>
    {% csrf_token %}
    <section id="inventory-section" style="padding-top: 150px;">
      <div class="inventory-container">
        <header class="inventory-header">
            <div class="header-left">
              <button class="icon-btn" id="edit-mode-btn">
                <img
                  src="{% static 'inventory/images/af17d7a9a051336b2e0b5198b9242c4744829877.png' %}"
                  alt="Edit"
                />
              </button>
              {% if is_admin %}
              <button class="icon-btn" id="delete-mode-btn">
                <img
                  src="{% static 'inventory/images/f2a618d9d063a5a882d9001a79266c8923e43b84.png' %}"
                  alt="Delete"
                />
              </button>
              <button class="btn btn-secondary" id="delete-selected-btn" style="display: none">DELETE SELECTED</button>
              {% endif %}
          
              <button
                class="btn btn-secondary"
                id="save-changes-btn"
                style="display: none"
              >
                SAVE CHANGES
              </button>
            </div>
          
            <h1 class="inventory-title">INVENTORY</h1>
          
            <div class="header-right">
              {% if is_admin %}
              <a href="{% url 'inventory:inventory_reports' %}" class="btn btn-secondary">View Reports</a>
              {% endif %}
              <a href="{% url 'dashboard' %}" class="btn btn-primary">Back to Dashboard</a>
            </div>
          </header>

        <div class="table-wrapper">
          <div class="inventory-table">
            <div class="table-header">
              <div class="table-col">ITEM</div>
              <div class="table-col">DESCRIPTION</div>
              <div class="table-col">QUANTITY</div>
              <div class="table-col">LOCATION</div>
              <div class="table-col">DATE ADDED</div>
            </div>

            {% for item in items %}
            <div class="table-row" data-item-id="{{ item.id }}">
              <div class="table-col" data-label="ITEM">
                <span class="display-text">{{ item.name }}</span>
              </div>
              <div class="table-col" data-label="DESCRIPTION">
                <span class="display-text">{{ item.description|default:'NONE' }}</span>
              </div>
              <div class="table-col" data-label="QUANTITY">
                <span class="display-text">{{ item.quantity }}</span>
              </div>
              <div class="table-col" data-label="LOCATION">
                <span class="display-text">{{ item.location|default:'NONE' }}</span>
              </div>
              <div class="table-col" data-label="DATE ADDED">{{ item.date_added|date:"M d, Y, g:i a" }}
                {% if is_admin %}
                <button class="delete-icon" data-item-id="{{ item.id }}" title="Delete item">
                  <img src="{% static 'inventory/images/f2a618d9d063a5a882d9001a79266c8923e43b84.png' %}" alt="Delete" />
                </button>
                {% endif %}
              </div>
            </div>
            {% empty %}
            <div class="empty-state">
              <p>No items found. Click the edit button to add your first item!</p>
            </div>
            {% endfor %}

            <div class="add-button-container">
              <button class="add-single-btn" id="add-single-btn">
                <img src="{% static 'inventory/images/a01ffede1eba194682a64d6b496148abb64b8d6a.png' %}" alt="Add item" />
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </body>
</html>
